
---
layout:       post
title:        C++大作业代码(1)
subtitle:     C++大作业代码(1)
date:         2019-06-05 07:06:00
author:       "xuepro"
header-img:   "img/home_bg.jpg"
header-mask:  0.3
catalog:      true
multilingual: true
tags:
    - DL
---

### 简易租车程序

```cpp
#include <iostream>
#include <string>
#include <vector>
#include <stdio.h>
#include <stdlib.h>
using namespace std;
const int car_num = 5;//个体能租的最大汽车数量

class car {
	int carid;//车辆编号
	string carname;//车型
	double bill;//租金
	int flag{ 0 };//租赁标志
public:
	car() {}
	car(int a, string n, double b, int c) {
		carid = a;
		carname = n;
		bill = b;
		flag = c;
	}
	//车辆未租
	void in() {
		flag = 1;
	}
	//车辆已租
	void out() {
		flag = 0;
	}
	//得到租金
	double getbill() {
		return bill;
	}
	//得到车辆编号
	int getcarid() {
		return carid;
	}
	//设置租金
	void setbill(double b) {
		bill = b;
	}
	//设置车型
	void setcarname(string n) {
		carname = n;
	}
	//打印单个车辆信息
	void print() {
		cout << carid << "\t\t" << carname << "\t\t" << bill << "\t\t" << flag << endl;
	}
};

class client {
	string name;//用户名字
	int client_no;//用户id
	int carno[car_num]{ 0 };//记录租的车辆编号
	double check{ 0 };//总租金
public:
	client() {}
	client(int no, string name) {
		this->client_no = no;
		this->name = name;
	}
	//得到用户id
	int getno() { return client_no; }
	//修改用户名字
	void setname(string s) { name = s; }
	//借车
	void borrow(car a_car) {
		int i;
		for (i = 0; i < car_num; i++)
		{
			if (carno[i] == 0)
			{
				carno[i] = a_car.getcarid();
				check += a_car.getbill();
				break;
			}
		}
		if (i == car_num)
			cout << "该用户已达最大租车数量" << endl;
	}
	//还车
	void back(car a_car) {
		int i;
		for (i = 0; i < car_num; i++)
		{
			if (carno[i] == a_car.getcarid())
			{
				carno[i] = 0;
				check -= a_car.getbill();
				return;
			}
		}
		cout << "该用户未租编号为" << a_car.getcarid() << "的车" << endl;
	}
	//打印单条用户信息
	void print() {
		cout << client_no << "\t\t" << name << "\t\t" << check << "\t\t";
		for (int i = 0; i < car_num; i++)
		{
			if (carno[i] != 0) { cout << carno[i] << '#'; }
		}
		cout << endl;
	}
};

class client_db {
public:
	vector<client> clients;
	client_db() {
		client c1(1001, "张三");
		client c2(1002, "李四");
		client c3(1003, "王五");
		clients.push_back(c1);
		clients.push_back(c2);
		clients.push_back(c3);
	}
	//得到指定编号的用户位置
	int get_cli(int id) {
		for (int i = 0; i < clients.size(); i++)
		{
			if (clients[i].getno() == id)
				return i;
		}
		return -1;
	}
	//增加用户
	void addcli(client cli) {
		clients.push_back(cli);
	}
	//删除
	void delcli(int n) {
		int flag = 0;
		//使用erase删除，防止iter变成野指针
		for (vector<client>::iterator iter = clients.begin(); iter != clients.end(); )
		{
			if (iter->getno() == n)
			{
				iter = clients.erase(iter);
				flag = 1;
			}
			else
				iter++;
		}
		if (flag == 0)
			cout << "查无此户" << endl;
	}
	//打印所有用户
	void print() {
		printf("----------------客户信息----------------\n");
		printf("编号       姓名       租金($)    已租车辆编号\n");
		for (int i = 0; i < clients.size(); i++)
			clients[i].print();
	}
};

class car_db {
public:
	vector<car> cars;
	car_db() {
		car c1(9001, "大众", 200, 1);
		car c2(9002, "宝马", 300, 1);
		car c3(9003, "五菱", 50, 1);
		cars.push_back(c1);
		cars.push_back(c2);
		cars.push_back(c3);
	}
	//查询编号为id的车在vector中位置,返回car类型
	car get_car(int id) {
		int i;
		for (i = 0; i < cars.size(); i++)
		{
			if (cars[i].getcarid() == id)
				break;
		}
		return cars[i];
	}
	//查询编号为id的车在vector中位置,返回下标
	int get_car_no(int id) {
		int i;
		for (i = 0; i < cars.size(); i++)
		{
			if (cars[i].getcarid() == id)
				break;
		}
		return i;
	}
	//增加汽车信息
	void addcar(car c) {
		cars.push_back(c);
	}
	//删除汽车信息
	void delcar(int car_id) {
		int flag = 0;
		//使用erase删除，防止iter变成野指针
		for (vector<car>::iterator iter = cars.begin(); iter != cars.end(); )
		{
			if (iter->getcarid() == car_id)
			{
				iter = cars.erase(iter);
				flag = 1;
			}
			else
				iter++;
		}
		if (flag == 0)
			cout << "查无此车" << endl;
	}
	//打印所有汽车信息
	void print() {
		printf("----------------车辆信息----------------\n");
		printf("编号       车型       租金       出租情况\n");
		for (int i = 0; i < cars.size(); i++)
			cars[i].print();
	}
};

//全局变量:客户db、汽车db
client_db clidb;
car_db cardb;

//交互操作函数
void add_client() {//增加用户
	int num;
	string name;
	cout << "请输入编号:";
	cin >> num;
	cout << "请输入姓名:";
	cin >> name;
	client c(num, name);
	clidb.addcli(c);
}
void del_client() {//删除用户
	int num;
	cout << "请输入要删除的用户编号:";
	cin >> num;
	clidb.delcli(num);
}
void add_car() {//增加汽车
	int num;
	double rent;
	char name[2];
	cout << "请输入编号:";
	cin >> num;
	cout << "请输入车型:";
	cin >> name;
	cout << "请输入租金:";
	cin >> rent;
	car c(num, name, rent, 1);
	cardb.addcar(c);
}
void del_car() {//删除汽车
	int num;
	cout << "请输入要删除的车辆编号:";
	cin >> num;
	cardb.delcar(num);
}
void borrow_car() {//借车
	int cliid, carid, cliindex, carindex;
	car car_;
	cout << "请输入要借车的用户编号：";
	cin >> cliid;
	cout << "请输入要租的车的编号：";
	cin >> carid;
	cliindex = clidb.get_cli(cliid);
	car_ = cardb.get_car(carid);
	clidb.clients[cliindex].borrow(car_);
	carindex = cardb.get_car_no(carid);
	cardb.cars[carindex].out();
}
void back_car() {//还车
	int cliid, carid, cliindex, carindex;
	car car_;
	cout << "请输入要还车的用户编号：";
	cin >> cliid;
	cout << "请输入要还的车的编号：";
	cin >> carid;
	cliindex = clidb.get_cli(cliid);
	car_ = cardb.get_car(carid);
	clidb.clients[cliindex].back(car_);
	carindex = cardb.get_car_no(carid);
	cardb.cars[carindex].in();
}
void update_client() {
	int num, pos;
	string n;
	cout << "请输入要修改的用户编号:";
	cin >> num;
	cout << "请输入新的姓名:";
	cin >> n;
	pos = clidb.get_cli(num);
	clidb.clients[pos].setname(n);
	cout << "修改完成！" << endl;
}
void update_car() {
	int num, pos;
	double b;
	string n;
	cout << "请输入要修改的车辆编号:";
	cin >> num;
	cout << "请输入新的车型:";
	cin >> n;
	cout << "请输入租金:";
	cin >> b;
	pos = cardb.get_car_no(num);
	cardb.cars[pos].setcarname(n);
	cardb.cars[pos].setbill(b);
	cout << "修改完成！" << endl;
}
void new_main() {
	char fu;//用户输入
	while (true)
	{
		printf("-----------------欢迎-----------------\n");
		printf("a--查看用户                  b--查看车辆\n");
		printf("c--增加用户                  d--增加车辆\n");
		printf("e--删除用户                  f--删除车辆\n");
		printf("g--修改用户                  h--修改车辆\n");
		printf("i--用户借车                  j--用户还车\n");
		printf("0--退出                               \n");
		printf("-----------------欢迎-----------------\n");
		cin >> fu;
		if (fu == '0')  return;
		if (fu == 'a')  clidb.print();
		if (fu == 'b')  cardb.print();
		if (fu == 'c')  add_client();
		if (fu == 'd')  add_car();
		if (fu == 'e')  del_client();
		if (fu == 'f')  del_car();
		if (fu == 'g')  update_client();
		if (fu == 'h')  update_car();
		if (fu == 'i')  borrow_car();
		if (fu == 'j')  back_car();
		getchar();
		cout << "按回车继续" << endl;
		getchar();
	}
}

int main() {
	new_main();
	system("pause");
}
```
