---
layout:       post
title:        "4. 循环"
subtitle:     "4. Loop"
date:         2017-10-30 12:04:00
author:       "xuepro"
header-img:   "img/home_bg.jpg"
header-mask:  0.3
catalog:      true
multilingual: true
tags:
    - C
---

C语言中有2种最常用的循环语句：while循环 和for 循环。



## while循环 (while Loop)：

```c
      while (condition表达式)
      {
          body程序块
      }
```      

*含义:* 只要while里得到condition表达式是真的，就一直重复执行body程序块。

![](https://www.ntu.edu.sg/home/ehchua/programming/java/images/Flowchart_While.png)


还有一个变种 do-while循环，

    do {
       body程序块
    } while(condition表达式)； 

*含义:* 只要while里得到condition表达式是真的，就一直重复执行body程序块。

![](https://www.ntu.edu.sg/home/ehchua/programming/java/images/Flowchart_DoWhile.png)


## for循环 (for loop) :

     for (init初始表达式; test测试表达式;  post_proc后处理表达式)
     {
          body程序块
     }

*含义:*  先执行init初始化表达式,然后重复下列循环：
```
   如果"test测试表达式"真 -> 执行body程序块 -> post_proc后处理表达式
```
直到"test测试表达式"不真。

![](https://www.ntu.edu.sg/home/ehchua/programming/java/images/Flowchart_For.png)

例如，求1到100之间的整数和：

      int sum = 0 , i =1;
       while( i<= 100) {
              sum = sum + i;
              i = i+1;  
       }

或

      int sum = 0;
      for( int i = 1; i<= 100 ; i++) {
              sum +=  i;          
       }

注：
       1） C 语言中 " i++  " 就相当于" i = i+1" ，因此++称为自曾运算符。

       2） " sum += i   " 就相当于" sum = sum + i" 。 类似的还有： -=   ，*= ，/+  等运算符！

循环生成10个随机数
```c
#include <stdio.h>

#include <stdlib.h>  /*rand() 和 srand*/

#include <time.h>    /* time() */

#include <ctype.h>

int main() {
   /* rand() 生成一个介于[0, RAND_MAX]的随机整数 */
   printf("RAND_MAX is %d\n", RAND_MAX);   /*32767*/
 
   /* 生成10个0到99之间的随机整数,
   因没有先生成“随机数发生器”，所以产生结果可能是一样的 
   */
   
   int i;
   for (i = 0; i < 10; ++i) {
      printf("%d ", rand() % 100);   
   }
   printf("\n");
 
   /* 用当前时间作为参数，生成一个“随机数发生器” */
   srand(time(0));   

   /* 生成10个0到 99之间的随机整数，结果不一样 */   
   for (i = 0; i < 10; ++i) {
      printf("%d ", rand() % 100);   /* <stdlib.h> */
   }
   printf("\n");

   /* 生成10个0到 1之间的随实数，结果不一样 */   
   for (i = 0; i < 10; ++i) {
      printf("%f ", rand()/ (RAND_MAX+0.1) );   /*实数相除才能得到实数 */
   }
   printf("\n");
}
```

## break  

  可用于跳出for和while循环体，也可以用于跳出switch条件语句：

```c
void main(){
  int sum=0,n = 0;
  while (1) {
    n++;
    if (n == 101) {
        break;
    }
    sum +=n;
  }
  printf("%d\n",sum);
}
```

问：如何判断一个整数n是否是质数？

思考：假设n不是质数，则存在两个不是1和n的整数a和b，使得```n = a*b```。
不妨设```a<b```，则a不可能大于n/2。也就是说“非质数”必定存在一个介于2和n/2之间的整数a能整除n。

因此，只要用2到n/2之间的每个整数去除一下n，看看是否能整除n,就能判断n是否是质数了。

程序如下：

```c
#include<Stdio.h>

int main(){
   int n,a,m; 
   printf("请输入一个整数\n");
   scanf("%d",&n);
  
   m = n/2;
   for (a = 2; a <= m; ++a) {
      if ( n % a == 0) {   // a整除n?
            printf("%d 不是一个质数 ", n);
            break;   /* 跳出循环，不需要再检查了*/
      }
   }
}
```

## continue  

  跳过剩余语句，继续循环：

```c
#include <stdio.h>
void main(){
   int n=0;
   for (; n<=20; n++) {
      /* i是否是奇数 */
      if (n % 2 == 1) {
         /* 回到循环的开头*/
         continue;
      }
      printf("%d\n",n);
   }
}
```

## 上面，我们已经看到循环和条件语句可以嵌套,再如

```c
#include <stdio.h>
void main(){
   int n = 100,i,sum=0;
    if ( n > 0){
        for(i = 0 ; i<n;i++)
           sum += i;

    }
    printf("sum=%d\n",sum); 
}
```    
或
```c
#include<stdio.h>
void main( ){
   char command;          
   while( 1 ){
       command = getchar( );
       getchar(); /*   跳过输入缓冲区的换行符号/n */
       
       switch( command){
         case ' W ' :
             printf( " welcome to come here ! \n " ); 
             break;
         case 'P':
             printf( " I print some information  for you \n " ); 
             break;
         default:
             printf(" You pressed other key \n ");
             break;
       }

       if(command=='q')  break; 
   }
}
```

## 练习：
1. 请编写一个函数计算y =x^2在区间[-1,3]之间的定积分 （即该区间函数曲线和x轴之间部分的面积）。
2. 猜数字游戏：程序随机生成一个 1到100之间的整数，然后让用户猜测一个数字，如果猜对了就祝贺并程序退出，猜错了，提示一下“太大”或“太小”，一共可以猜测比如7次。
   提示：随机生成一个整数代码如下：
   
```c
#include <stdio.h>

#include <stdlib.h>

#include <time.h>

#include <ctype.h>

int main(){
    int number;
    /*产生一个随机数发生器*/
    srand( (unsigned)time( NULL ) );

 /* rand()随机生成一个整数,
    然后除以最大值RAND_MAX，
    得到0到1之间的一个实数*/
    for(int i = 0 ; i<5;i++){
    number = 1+(int)(100.0*rand()/(RAND_MAX+0.1));
    printf("%d\n",number);
 }
}
```

